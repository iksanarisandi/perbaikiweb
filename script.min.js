document.addEventListener('DOMContentLoaded', () => { const body = document.body; body.classList.add('no-animations'); const enableAnimations = () => { setTimeout(() => { body.classList.remove('no-animations'); }, 500); }; if ('fonts' in document) { const fonts = ['400 1em Inter', '600 1em Inter', '700 1em Inter', '800 1em Inter']; let fontsLoaded = 0; fonts.forEach(font => { if (document.fonts.check(font)) { fontsLoaded++; } else { document.fonts.load(font).then(() => { fontsLoaded++; if (fontsLoaded === fonts.length) { enableAnimations(); } }); } }); if (fontsLoaded === fonts.length) { enableAnimations(); } } else { enableAnimations(); } const revealElements = document.querySelectorAll('.scroll-reveal'); const startReveals = () => { const revealObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting && !document.body.classList.contains('no-animations')) { entry.target.classList.add('active'); observer.unobserve(entry.target); } }); }, { root: null, threshold: 0.15, rootMargin: "0px 0px -50px 0px" }); revealElements.forEach(element => { revealObserver.observe(element); }); }; startReveals(); const typingTextElement = document.querySelector('.typing-text'); const textToType = "Kami bantu fix webmu hingga siap dipakai."; let charIndex = 0; let isTyping = false; if (typingTextElement) { typingTextElement.style.minHeight = '1.2em'; typingTextElement.style.display = 'inline-block'; typingTextElement.style.width = 'fit-content'; typingTextElement.textContent = ''; } const typeWriter = () => { if (charIndex < textToType.length && !document.body.classList.contains('no-animations')) { typingTextElement.textContent += textToType.charAt(charIndex); charIndex++; setTimeout(typeWriter, 50); } }; const typingObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting && !isTyping && !document.body.classList.contains('no-animations')) { isTyping = true; typeWriter(); typingObserver.unobserve(entry.target); } }); }, { threshold: 0.5 }); if (typingTextElement) { typingObserver.observe(typingTextElement.parentElement); } const countUpElements = document.querySelectorAll('.count-up'); countUpElements.forEach(element => { const originalDisplay = element.style.display; element.style.display = 'inline-block'; element.style.minWidth = '2ch'; const countUp = () => { const target = +element.getAttribute('data-target'); const duration = 2000; const increment = target / (duration / 16); let current = 0; const updateCount = () => { if (!document.body.classList.contains('no-animations')) { current += increment; if (current < target) { element.textContent = Math.ceil(current); requestAnimationFrame(updateCount); } else { element.textContent = target; element.style.minWidth = target.toString().length + 'ch'; } } }; if (!document.body.classList.contains('no-animations')) { updateCount(); } }; const countObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { countUp(); countObserver.unobserve(entry.target); } }); }, { threshold: 0.5 }); countObserver.observe(element); }); document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { e.preventDefault(); const target = document.querySelector(this.getAttribute('href')); if (target) { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); }); const images = document.querySelectorAll('img'); images.forEach(img => { if (img.complete) { img.style.aspectRatio = `${img.naturalWidth} / ${img.naturalHeight}`; } else { img.addEventListener('load', () => { img.style.aspectRatio = `${img.naturalWidth} / ${img.naturalHeight}`; }); } }); });